Bazaar support for Subversion branches, working trees and repositories
======================================================================

.. contents::

Introduction
------------

bzr-svn is a plugin that allows Bazaar_ direct access to Subversion_ 
repositories. It allows most bzr commands to work directly against Subversion 
repositories, as if you were using bzr with a native bzr repository.

.. _Bazaar: http://bazaar-vcs.org/
.. _Subversion: http://subversion.tigris.org/

The plugin can at the moment be used to commit to, pull from, merge from, push 
to and view logs of Subversion branches from Bazaar.

Dependencies
------------

You will need a recent version of Bazaar, usually the release of Bazaar 
released in the same month as the release of bzr-svn you are using.

You also need a fairly recent version of the official Python bindings to the 
Subversion libraries. At the moment, the svn plugin only works with 
Subversion 1.5 (trunk). The python-subversion (not python-svn!) package 
in Ubuntu since Feisty and Debian since Etch also contain the 
required changes. 

If you are running an older version of Python (under 2.5), you will also 
need to have the pysqlite package installed.

In order to be able to use the ``svn-upgrade`` command (for those 
who used earlier versions of bzr-svn), you will need the `bzr-rebase`_ 
plugin.

.. _bzr-rebase: http://bazaar-vcs.org/Rebase

Features
--------

The following features are currently present:

- Connecting to remote Subversion repositories over all 
  protocols supported by Subversion itself (at present: 
  svn://, svn+ssh://, http:// (webdav), file://) 
  as well as dump files. 

  Checkouts, lightweight checkouts and branching works.

- Integrates well with Bazaar.

- Track Bazaar merges in Subversion. Merged revisions show up 
  as ghosts.

- Subversion working copies. Can be modified, queried 
  (``bzr status`` on a svn- native working copy created with 
  ``svn co`` works) and committed from.

- Committing to Subversion from Bazaar.

- Push Bazaar revisions to Subversion. 

- Follow branch copies. Revision history is not 
  truncated when a branch was copied in Subversion.

- Efficiently uses network bandwidth. 

- Recognizes file metadata (executable bits, symbolic links).

- 'svn-import' command with functionality similar to svn2bzr_.

- Ability to track merges done with SVK_ and write merges from SVK/Subversion branches in a format understandable by SVK.

.. _SVK: http://svk.elixus.org/

- Generates consistent file ids and revision ids. Two branches made using 
  this plugin of the same Subversion branch will result in *exactly* the same 
  Bazaar branch.

- Handles complex operations in Subversion: committing to two branches at 
  once, upgrading directories to branches, copies from early revisions, ...

- Tested on Linux, Windows and Mac OS X. 

Documentation
-------------

bzr-svn can be used through the regular Bazaar user interface, see the 
`Bazaar Documentation Overview`_ for documentation on that.

.. _Bazaar Documentation Overview: Documentation

Some bzr-svn specific issues are answered by the FAQ_.

.. _FAQ: http://samba.org/~jelmer/bzr-svn/FAQ.html

The way Bazaar metadata is stored in Subversion and the other way around is specified in the `mapping specification`_.

.. _mapping specification: BzrForeignBranches/Subversion/mapping

Support
-------
Ask bzr-svn related questions on the `Bazaar mailing list`_ or in the 
#bzr IRC channel on Freenode_.

.. _Bazaar mailing list: http://lists.canonical.com/listinfo/bazaar/
.. _Freenode: http://www.freenode.net/



Future Enhancements
-------------------

In the future, I also hope to support:

- Renames. Initial work has been done to support this, 
  but the number of corner cases is wide, so support for this 
  has not been enabled by default yet.

- Override implementation of get_revision_delta(). Will speed up 'bzr log -v'
	
- use svn_ra_replay() when using servers that have Subversion 1.4. Saves a 
  couple of roundtrips when fetching history.

- Shallow branches. Most of the existing Subversion repositories 
  are quite large and it would therefore be nice to be able to limit 
  the amount of history that needs to be retrieved during checkouts.

Some Subversion properties can currently not be represented in Bazaar 
and are therefore ignored for the time being:

- 'svn:ignore' is not imported. There should be a 
  'Repository.get_ignores(revid)' call in Bazaar rather than a magic 
  '.bzrignore' file. 
   
- 'svn:externals'. Externals should be mapped to Bazaar 'by-reference' 
  nested branches and the other way around. This can't be implemented 
  this until Bazaars nested branch support lands. AaronBentley's work 
  in progress is at http://code.aaronbentley.com/bzr/bzrrepo/nested-trees/.
  This has been delayed until after 0.9 because of required repository
  format changes.

- 'svn:mime-type'

- 'svn:eol-style'

- 'svn:keywords'. Requires keywords support in Bazaar. Spec at 
  https://launchpad.net/products/bzr/+spec/bzr-keyword-expansion

Other features currently held back by Bazaars feature set:

- Tracking copies. 
 
  Spec at https://launchpad.net/products/bzr/+spec/filecopies

- Showing SVN merges as merges in Bazaar. This requires full merge tracking 
  information in Subversion, something which the Subversion folks are working 
  on at the moment (see https://svn.collab.net/repos/svn/branches/merge-tracking).

  Requires tracking cherry-picking support in Bazaar:
   
  Spec at https://launchpad.net/products/bzr/+spec/bzr-cpick-data

Bugs
----

Please file bug reports in launchpad. The product URL for bzr-svn is
https://launchpad.net/bzr-svn/. The wiki for this 
plugin is at http://bazaar-vcs.org/BzrSvn.

Installation
------------

Simply place this directory in ~/.bazaar/plugins and you should be able 
to check out branches from Subversion using bzr. Make sure the directory 
name is 'svn'.

Development
-----------

Unit testing
~~~~~~~~~~~~
To run the bzr-svn testsuite, simply run 'bzr selftest svn'



..
	vim: ft=rest
