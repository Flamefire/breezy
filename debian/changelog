bzr-builddeb (2.1) UNRELEASED; urgency=low

  [ Jelmer Vernooij ]
  * Add simple deb: directory service for Bazaar that uses the dpkg Vcs-* fields.
  * Fix mark-uploaded when used in merge mode. (Closes: #500851)

  [ James Westby ]
  * Support repacking of .zips. Thanks Daniel Hahler.

 -- James Westby <james.westby@canonical.com>  Thu, 28 Aug 2008 11:41:35 +0100

bzr-builddeb (2.0.2~0ubuntu2) intrepid; urgency=low

  * Use properties.tarball_dir() instead of .target_dir(), as the latter
    doesn't exist. Thanks Laurent Bigonville (LP: #286403)

 -- James Westby <james.westby@canonical.com>  Mon, 20 Oct 2008 14:35:19 +0100

bzr-builddeb (2.0.2~0ubuntu1) intrepid; urgency=low

  * Pass --only-source to "apt-get source" call, as this will prevent apt
    from assuming the package name we pass is a binary package name which
    it must look up the source for. This would cause problems when there
    are a source package and binary package that are named the same, but
    the binary package isn't built from the source package, e.g. firefox,
    linux. (bug #275446)
  * Add "squeeze" and "jaunty" to the list of known releases. (bug #275448)
  * Make source and result dirs being the same work better.
  * Simplify use of uscan and make it more robust.

 -- James Westby <james.westby@canonical.com>  Sun, 28 Sep 2008 14:53:16 +0100

bzr-builddeb (2.0.1) experimental; urgency=low

  * Fix retrieval of the upstream source from a watch file of the archive.
    - It would download to the specified tarball directory, but then
      report it as stored in the compatibility directory. (bug #262618)
  * Don't move the result if the source and destination are the same location.
    (bug #262621)
  * Use --result-dir rather than --result for concistency with the other
    options and the configuration key. --result is still accepted, but
    deprecated. (bug #263643)
  * Add a revisionspec that allows you to specify a revision by the
    package version number, e.g. -r package:0.1-1.
    https://blueprints.launchpad.net/bzr-builddeb/+spec/package-revisionspec
  * Use the upstream part of the version number when repacking the tarball.
    (bug #263373)
  * Merge the upstream tags in to the packaging ones after importing a new
    upstream. (bug #263373)
  * Strip the changelog message as debcommit does. Thanks to Colin Watson.
    (bug #265045)
  * "Fix" fetching between two locked branches which share a repository.
    (bug #264705)
  * Handle remote files in repack check that checksums match when target
    exists. (bug #263371)
  * Fix the README to mention bzrtools is required.
  * Depend on at least 0.1.11 of python-debian for strict=False support. 
  * Check that versions are in the ancestry of the current branch.
    (bug #264701)
  * Fix locking problems with merge_upstream in shared repository.
  * Handle invalid version numbers in the changelog by ignoring them.
    (bug #248447)
  * During merge-upstream correctly check whether the new upstream is
    already imported. (bug #272118)

 -- James Westby <james.westby@canonical.com>  Mon, 22 Sep 2008 12:04:09 +0100

bzr-builddeb (2.0) experimental; urgency=low

  [ Jelmer Vernooij ]
  * Support +bzr for snapshots as well as ~bzr.
  * Lock the tree before starting as remote trees are more strict about this,
    meaning there were problems with remote branches.
  * Import apt_pkg only when used, as it is used rarely and importing it
    has an overhead, and also leads to increased memory usage.

  [ James Westby ]
  * Lots of compatibilty breaking changes. Please see NEWS.Debian for advice.
  * Use the last entry from debian/changelog as the commit message
    when importing a .diff.gz or native package with import-dsc.
  * Use dpkg-source to extract source pacakges, which is much more robust.
  * Don't use strict changelog parsing from python-debian, as we don't
    need faithful reproduction.
  * Follow dpkg-buildpackage etc. more closely by looking for .orig.tar.gz
    in the parent directory, and placing the result of the build there.
    - ../tarballs is still used a fallback for compatibility.
    - moving the result doesn't fail the build if the .changes can't be
      found when the default is used, to support builders that move
      the package elsewhere.
    - The .changes file can be missed if the arch is not what is expected,
      for instance if "debuild -S" was set as the builder.
  * builddeb --result now works for packages with an epoch.
  * Added mark-uploaded command that sets the appropriate tag based
    on the version, for use after upload.
  * merge-upstream and import-dsc have had their command line options
    changed to be more sensible, and to be future-proof. Details in
    the online help or the documetation.
  * --snapshot has been dropped from import-dsc. snapshot.debian.net
    is virtually useless currently. Something similar can be brought
    back when we have such a service again.

 -- James Westby <james.westby@canonical.com>  Fri, 13 Jun 2008 15:03:53 +0100

bzr-builddeb (0.95) unstable; urgency=low

  [ Jelmer Vernooij ]
  * Support building from remote branches,
    "bzr builddeb http://wherever/package.debian" will now work.

 -- James Westby <james.westby@canonical.com>  Fri, 16 May 2008 12:29:08 +0100

bzr-builddeb (0.94) unstable; urgency=low

  [ Jelmer Vernooij ]
  * Support building against snapshots from Subversion branches.
  * Suggest bzr-svn to hint that you can work with svn. The version
    is the one that exports the svn-buildpackage mergeWithUpstream
    property as "merge = True", so that bzr-builddeb will seamlessly
    build these branches.

  [ Sebastian Bober ]
  * Disable the testsuite during build as we can't be sure that
    /etc/apt/sources.list has a deb-src line. "check" or "test"
    in DEB_BUILD_OPTIONS will turn it back on again. (Closes: #472543)
  * Build-Depend and Depend on python-apt, as it is used directly
    now.
  * Tweaks to stamp handling in debian/rules.

  [ James Westby ]
  * Make the tarball dir before trying to download from the archive in
    to it. (LP: #223948)

 -- James Westby <james.westby@canonical.com>  Thu, 15 May 2008 16:59:00 +0100

bzr-builddeb (0.93) unstable; urgency=low

  [ Arnaud Fontaine ]
  * Add Vcs-Bzr field (dpkg supports it now) in debian/control.
  * Update GPL path to GPL-2 in debian/copyright as GPL-3 is now the default.

  [ Jelmer Vernooij ]
  * Allow building snapshots of packages based on version in changelog.
    (Closes: #452130)

  [ James Westby ]
  * Stop specifying a specific branch format when importing a .dsc.
    This improves performance significantly as packs will now be used.
    Require bzr 1.0 so that packs are default.
  * Fix the import diff code to not deadlock on large diffs. Thanks to
    Jamie Wilkinson. (Closes: #451248)
  * Exclude more files/directories than just .bzr when importing.
  * Normalise filenames from the tarballs when extracting to import a
    dsc to avoid errors on strange tarballs.
  * Treat hardlinks in tarballs as a copy of the file. This at least
    gets the data, and is representable in bzr.
  * Don't silently skip unkown types when extracting a tarball, error
    instead.
  * Don't use relative imports. Thanks Robert Collins. (LP: #189429)
  * Remove the .bzr-builddeb from merge builds not in "larstiq" mode.
    (Closes: #464033)
  * Don't tell cp to be verbose when copying back the debian/ dir
    in bd-do.
  * Update the dependencies on bzr and bzrtools to more recent versions.
  * Update the VCS-Bzr: header for the new branch location.
  * Avoid failing the testsuite because of a user's ~/.bazaar/builddeb.conf.

 -- James Westby <jw+debian@jameswestby.net>  Wed, 19 Mar 2008 21:27:37 +0000

bzr-builddeb (0.92) unstable; urgency=low

  * Support incremental imports of normal mode packages from source packages
    for uploads done outside the VCS.
  * Also look for upstream tarballs in the archives. Do this in preference
    to the watch file, for the case where the upstream was repacked.
  * Filter out any changes to .bzr in packages that are being imported as they
    will totally mess things up. If the branch is in the source package then
    just use apt-get source. (LP: #156003)
  * bzr 0.92 is required.
  * Improve the error message when the upstream tag is not found to actually
    give the name of the expected tag.
  * Allow the last upstream not to be on the mainline during merge-upstream.
  * Don't complain when repacking the tarball if the target exists, but is the
    same as the source. Only .tar.gz can be considered identical.

 -- James Westby <jw+debian@jameswestby.net>  Wed, 31 Oct 2007 21:06:58 +0000

bzr-builddeb (0.91) unstable; urgency=low

  [ Frédéric Brin ]
  * Correct unknown variable (files) when importing dsc.
  * chmod 755 debian/rules when importing dsc

  [ James Westby ]
  * Now handles merge mode with multiple entries in the root of
    upstream's tarball, which was causing havoc with dh-make-php packages.
    Thanks to Mark A. Hershberger for the report and Adeodato Simó
    for the pointer to the fix. (Closes: #440069)
  * Add version_info attribute so that bzrlib can find out the version of
    the plugin. Please try and remember to update it when releasing (set
    the word to 'final').
  * Use None instead of [] to revert all files as the latter is deprecated
    in bzr 0.91. Bump the required version accordingly.
  * Build the working tree by default (so --working-tree now has no effect,
    along with --ignore-changes).
  * Add --revision option to allow building an old revision of the branch
    without doing revert or similar.
  * Add the start of a blackbox test suite.
  * Add the ability to export an upstream branch in normal mode.
  * Add a bd-do command for running commands when in merge mode. This
    is useful when you need the full upstream source, for instance patch
    handling.
  * Add hook support for running arbitrary commands at pre-defined points
    in the build.
  * Support $UPSTREAM_VERSION in the export-upstream-revision configuration
    option. This allows builddeb to find the correct upstream revision based
  * Correct the pointer to the user manual in the README. Thanks to Achim
    Bohnet for noticing the mistake. (LP: #145019)
  * Many documentation fixes from dAniel hAhler. Thanks very much.

 -- James Westby <jw+debian@jameswestby.net>  Tue, 23 Oct 2007 22:24:40 +0100

bzr-builddeb (0.90) unstable; urgency=low

  * Support exporting the working tree when it contains symlinks. Thanks
    to John Arbash Meinel for help on fixing it. (LP: #132391)
  * Fix the repacking of .tar.bz2 file to .tar.gz. Thanks Frederic Brin.
  * Complete the transition of deb822 into python-debian.

 -- James Westby <jw+debian@jameswestby.net>  Wed, 22 Aug 2007 22:25:27 +0100

bzr-builddeb (0.19) unstable; urgency=low

  * Allow empty author information in the changelog for those that like to
    develop without filling it in, and then add it while releasing.
  * Drop the dependency on python-deb822 as it is now part of python-debian.
    Thanks to Loïc Minier and Lucas Nussbaum for noticing.
    (Closes: #436386, #436089)

 -- James Westby <jw+debian@jameswestby.net>  Mon, 13 Aug 2007 22:03:03 +0100

bzr-builddeb (0.18) unstable; urgency=medium

  * Medium urgency as it will hold up the bzr 0.18 transition.
  * Remove any 'debian/' directory from the upstream tarball in merge mode,
    so that the branch contains all of the files that will appear there.
  * Allow the changelog entries to have no author information.
  * Add a working-tree option to the configuration files that if set always
    builds the working tree rather than the last revision in the branch.
  * uscan is now used to download an upstream tarball if the version required
    is not available and the user has a watch file. Thanks to Daniel Holbach
    for the insipration for how to implement this. This makes devscripts a
    dependency. Add a watch file to your package to take advantage of this.
  * Add a user manual with some proper documentation. See
    /use/share/doc/builddeb/user_manual/index.html
  * Add an import-dsc command to import history from a series of source
    packages.
    - Currently only works for normal and native modes.
    - Currently only does initial imports, incremental imports will come later
      I hope.
    - Can automatically grab any packages from snapshot.debian.net.
  * Add a merge-upstream command that allows you to grab a new upstream
    version and merge your packaging changes back in to it.
    - Currently only supports normal mode.
    - Doesn't integrate with uscan yet.
  * Remove the need for --ignore-unknowns, as it is no longer checked for.
    The option is still there for backwards compatibility, but it now does
    nothing.

 -- James Westby <jw+debian@jameswestby.net>  Tue, 10 Jul 2007 22:25:49 +0100

bzr-builddeb (0.17) unstable; urgency=low

  [ James Westby ]
  * Pass max_blocks=1 when constructing changelogs as that is all that is
    needed currently. This requires a newer python-debian (0.1.3), so bump the
    version requirements. This would have helped with cases like #429299, but
    Reinhard already fixed that in python-debian.
  * python-deb822 changed from new classes to old classes in version 0.3.
    Handle the change in API, and bump the dependencies to make sure it will
    work.
  * Fix up Build-Depends and Build-Depends-Indep (thanks lintian).
  * Now require the changelog to be added to the branch with bzr add before
    it will try and read it. This avoids a nasty error.

 -- James Westby <jw+debian@jameswestby.net>  Mon, 18 Jun 2007 22:56:29 +0100

bzr-builddeb (0.16.2) unstable; urgency=low

  * loosen the dependency on bzr. bzr-builddeb seems to be not be broken
    by bzr version 0.17, so remove the upper bound of the dependency.

 -- Reinhard Tartler <siretart@tauware.de>  Tue, 12 Jun 2007 19:45:38 +0100

bzr-builddeb (0.16.1) unstable; urgency=low

  * fix FTBFS by correcting build depends. Thanks to
    "Rob Weir" <rob@weir.id.au> for providing the patch! (Closes: #423745)

 -- Reinhard Tartler <siretart@tauware.de>  Mon, 14 May 2007 14:08:11 +0200

bzr-builddeb (0.16) unstable; urgency=low

  [James Westby]
  * Lock the working trees to fix compatibility with 0.15+ dirstate trees.
    (Closes: #421900)
  * Add the start of a test suite to help avoid bugs like that.
  * Update the dependency on bzr to reflect the compatibility of this release.
    (Closes: #421041)
  * Take the package under the wing of pkg-bazaar.

  [Reinhard Tartler]
  * apply patch to util.py as suggested by Robert Collins: Use Tree
    directly, don't use the inventory.
  * upload to unstable

 -- Reinhard Tartler <siretart@tauware.de>  Tue,  8 May 2007 18:43:19 +0200

bzr-builddeb (0.15~rc1ubuntu1) gutsy; urgency=low

  * loosen depends, 0.15 works with bzr 0.16 as well

 -- Reinhard Tartler <siretart@tauware.de>  Tue,  1 May 2007 16:17:06 +0200

bzr-builddeb (0.15~rc1) feisty; urgency=low
  
  * Version designed to work with bzr 0.15.
  * Bump depends on bzr appropriately.
  * Install the plugin in .../plugins/builddeb instead of
    .../plugins/bzr-builddeb, as the latter is not a valid python identifier
    as is now required by bzr.
  * Export the package build to the correct directory name, using the upstream
    version rather than the full version. This removes a warning from
    dpkg-source when building and Closes: #409981. Thanks to James Vega.

 -- James Westby <jw+debian@jameswestby.net>  Fri,  9 Mar 2007 21:31:30 +0000

bzr-builddeb (0.14ubuntu2) feisty; urgency=low

  * fix the deprecation warning about 'short options' on every load of
    this plugin with bzr 0.14.
  * repack with a full bzr branch in the source

 -- Reinhard Tartler <siretart@tauware.de>  Wed, 31 Jan 2007 08:46:05 +0100

bzr-builddeb (0.14ubuntu1) feisty; urgency=low

  * revert the smart options patch so that the package gets usable with bzr 0.13 again.

 -- Reinhard Tartler <siretart@tauware.de>  Tue, 16 Jan 2007 23:16:44 +0100

bzr-builddeb (0.14) UNRELEASED; urgency=low

  * Compatible with bzr 0.14.
  * Drop the silly restriction on only invoking the command from the root
    of a branch.
  * Add support for non-native full source packages. To do this, just
    have orig-dir pointing to the dir containing the upstream tarballs.
    This involves a change in behaviour I am afraid. Native packages are
    now not the default, so if you have one echo 'native = True' to
    global.conf.
  * Add support for creating non-native packages from full source branches
    by creating the tarball from the branch, rather than the user creating it.
    It simply blows away debian/ from the tarball and names it appropriately
    in the build dir to get a non-native package where all of and only
    debian/ are in the .diff.gz.
  * Add support for exporting the upstream code from a bzr branch when in
    merge mode. Just use export-upstream with a URI of a bzr branch and that
    code will be the .orig.tar.gz of the source package. Please make sure
    that you don't grab a different upstream code for the same upstream
    version, that could break things horribly. You can also specify the
    revision to export with export-upstream-revision to combat this.
  * Add support for pulling in the upstream branch when it is local so that
    you can build the lastest version. The 'export-upstream-prepull' option
    is only availble as a config file option.
  * Add an option to stop the build if the above mentioned pull did nothing.
  * Add a --short/-S parameter to build source packages and a source-builder
    option to configure what it does.
  * Change to use the new version of the python-debian API, so that 0.1.1 is
    now required.
  * Builddeb configuration files that are used in the branch are marked as
    non-trusted. This means that you can no longer set any of the builders in
    them, as this would be arbitrary code execution. You have to set the
    builders in your ~/.bazaar/builddeb.conf now. If you don't like this
    change then please propose a scheme that allows you to do what you want,
    but doesn't expose people to the security threat.
  * Bump the required version of bzr to 0.14~rc1 or greater and less than 0.15.
  * Depend on dpkg-dev and fakeroot as they are used in the default builder
    commands.

 -- James Westby <jw+debian@jameswestby.net>  Wed, 31 Jan 2007 20:15:42 +0000

bzr-builddeb (0.13ubuntu1) feisty; urgency=low

  * upload to feisty
  * bump depends on bzr on (>= 0.13)

 -- Reinhard Tartler <siretart@tauware.de>  Tue, 16 Jan 2007 00:47:39 +0100

bzr-builddeb (0.13) unstable; urgency=low

  * New release. 
  * Comptible with bzr 0.13.

 -- James Westby <jw+debian@jameswestby.net>  Wed, 20 Dec 2006 00:22:18 +0000

bzr-builddeb (0.11) experimental; urgency=low

  * Initial Release. (Closes: #380198)
  * add myself to Uploaders

 -- Reinhard Tartler <siretart@tauware.de>  Wed,  3 Jan 2007 20:23:37 +0100
