Description: Suggest installing python-breezy.tests when breezy.tests is unavailable
Author: Jelmer Vernooij <jelmer@debian.org>
Status: Not upstream, Debian-specific

=== modified file 'breezy/builtins.py'
Index: unstable/breezy/builtins.py
===================================================================
--- unstable.orig/breezy/builtins.py
+++ unstable/breezy/builtins.py
@@ -4139,7 +4139,11 @@ class cmd_selftest(Command):
         # backtraces.
         lazy_import.disallow_proxying()
 
-        from . import tests
+        try:
+            from . import tests
+        except ImportError:
+            raise errors.BzrCommandError("tests not available. Install the "
+                "python-breezy.tests package to run the breezy testsuite.")
 
         if testspecs_list is not None:
             pattern = '|'.join(testspecs_list)
