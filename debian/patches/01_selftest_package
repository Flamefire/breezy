Description: Suggest installing python-bzrlib.tests when bzrlib.tests is unavailable
Author: Jelmer Vernooij <jelmer@debian.org>
Status: Not upstream, Debian-specific

=== modified file 'bzrlib/builtins.py'
--- old/bzrlib/builtins.py	2012-01-13 13:45:44 +0000
+++ new/bzrlib/builtins.py	2012-01-13 13:46:18 +0000
@@ -4013,7 +4013,11 @@
         # backtraces.
         lazy_import.disallow_proxying()
 
-        from bzrlib import tests
+        try:
+            from bzrlib import tests
+        except ImportError:
+            raise errors.BzrCommandError("tests not available. Install the "
+                "python-bzrlib.tests package to run the bzr testsuite.")
 
         if testspecs_list is not None:
             pattern = '|'.join(testspecs_list)

